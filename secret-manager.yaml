# Declarative Secret Manager mapping consumed by cloudrun-deploy.py.
#
# Each entry below ensures we can pre-populate a secret in Google Secret
# Manager before the deployment helper pushes a new revision. Secrets may come
# either from an environment variable (`value_from_env`) or from a local file
# (`source`). When providing a file, set `mount_path` to choose where Cloud Run
# mounts it and pair it with `env_var` so the application receives the mounted
# path as an environment variable. The deployment helper wires these fields up
# automatically. Feel free to tweak the secret IDs if you prefer a different
# naming scheme; the deployment script simply ensures they exist and uploads
# the provided value.

secrets:
  # Core model/provider credentials -----------------------------------------
  - secret_id: ringdown-openai-core-key
    value_from_env: OPENAI_API_KEY

  - secret_id: ringdown-anthropic-spellbook
    value_from_env: ANTHROPIC_API_KEY
    env_var: ANTHROPIC_API_KEY

  - secret_id: ringdown-managed-av-key
    value_from_env: PIPECAT_API_KEY
    env_var: PIPECAT_API_KEY

  - secret_id: ringdown-vertex-tether
    value_from_env: VERTEXAI_SERVICE_ACCOUNT_JSON
    mount_path: /var/secrets/vertexai-sa.json
    env_var: VERTEXAI_SA_PATH
    optional: true
    # Cloud Run mounts the secret as a file at `mount_path` and exports
    # `env_var` with that location, so the application can read the credential
    # without hard-coding paths.

  # Telephony + communications ----------------------------------------------
  - secret_id: ringdown-twilio-auth
    value_from_env: TWILIO_AUTH_TOKEN

  - secret_id: ringdown-gmail-impersonate
    value_from_env: GMAIL_IMPERSONATE_EMAIL

  - secret_id: ringdown-gmail-sa-key
    source: ./secrets/gmail-sa-key.json
    mount_path: /var/secrets/gmail-sa-key.json
    optional: true
    # The deploy helper uploads the local file, mounts it inside the
    # container, and (when paired with an `env_var`) lets FastAPI discover the
    # credential path via configuration.

  # Web + search tooling ----------------------------------------------------
  - secret_id: ringdown-tavily-api-key
    value_from_env: TAVILY_API_KEY

  - secret_id: ringdown-google-api-key
    value_from_env: GOOGLE_API_KEY

  # Managed Pipecat pipeline + observability --------------------------------
  - secret_id: ringdown-litellm-master-key
    value_from_env: RINGDOWN_LITELLM_MASTER_KEY
    env_var: RINGDOWN_LITELLM_MASTER_KEY

  - secret_id: ringdown-pipeline-handle-staging
    value_from_env: RINGDOWN_PIPELINE_HANDLE_STAGING
    env_var: RINGDOWN_PIPELINE_HANDLE_STAGING
    optional: true

  - secret_id: ringdown-pipeline-handle-production
    value_from_env: RINGDOWN_PIPELINE_HANDLE_PRODUCTION
    env_var: RINGDOWN_PIPELINE_HANDLE_PRODUCTION
    optional: true
